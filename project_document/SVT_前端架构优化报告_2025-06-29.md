# SVTå‰ç«¯æ¶æ„ä¼˜åŒ–æŠ¥å‘Š

**é¡¹ç›®**: SVT-Web å‰ç«¯æ¶æ„ä¼˜åŒ–
**åˆ›å»ºæ—¶é—´**: 2025-06-29 09:02:03 +08:00
**æ–‡æ¡£ç±»å‹**: æ¶æ„ä¼˜åŒ–æŠ¥å‘Š
**å›¢é˜Ÿè§’è‰²**: PM + PDM + AR + LD + DW

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æœ¬æŠ¥å‘ŠåŸºäºå¯¹SVTå‰ç«¯é¡¹ç›®çš„å…¨é¢ä»£ç å®¡è§†ï¼Œè¯†åˆ«äº†è®¾è®¡é€»è¾‘ã€ä»£ç å†—ä½™ã€è°ƒè¯•æ¶ˆæ¯æ•æ„Ÿæ€§å’Œæ•ˆç‡é—®é¢˜ï¼Œå¹¶æä¾›äº†ç³»ç»Ÿæ€§çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚

## ğŸ” é—®é¢˜åˆ†æ

### 1. è®¾è®¡é€»è¾‘é—®é¢˜ (ARä¸»å¯¼åˆ†æ)

#### 1.1 çŠ¶æ€ç®¡ç†æ¶æ„é—®é¢˜
**é—®é¢˜**: AuthStoreæ‰¿æ‹…è¿‡å¤šèŒè´£ï¼Œè¿åå•ä¸€èŒè´£åŸåˆ™
```typescript
// å½“å‰é—®é¢˜ï¼šAuthStoreåŒ…å«è®¤è¯ã€ç”¨æˆ·ä¿¡æ¯ã€æœºæ„è§’è‰²é€‰æ‹©ç­‰å¤šç§èŒè´£
interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
  loading: boolean;
  expiryDate: string | null;
  hasSelectedOrgRole: boolean;
  // ... è¿‡å¤šçš„æ–¹æ³•å’ŒçŠ¶æ€
}
```

**å½±å“**: 
- çŠ¶æ€æ›´æ–°å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤
- æµ‹è¯•å›°éš¾ï¼ŒèŒè´£è¾¹ç•Œä¸æ¸…
- ä»£ç å¤ç”¨æ€§å·®

#### 1.2 ç»„ä»¶è€¦åˆåº¦é—®é¢˜
**é—®é¢˜**: BasicLayoutç»„ä»¶é›†æˆè¿‡å¤šåŠŸèƒ½æ¨¡å—
```typescript
// å½“å‰é—®é¢˜ï¼šBasicLayoutç›´æ¥ç®¡ç†å¤šä¸ªå­ç³»ç»Ÿ
const BasicLayout: React.FC = () => {
  const sidebarState = useSidebarState();
  const pathMappingState = usePathMapping(user?.menuTrees as MenuItem[]);
  const tabManager = useTabManager({ getTabName: pathMappingState.getTabName });
  // ... è¿‡å¤šçš„çŠ¶æ€ç®¡ç†
};
```

**å½±å“**:
- ç»„ä»¶å¤æ‚åº¦é«˜ï¼Œéš¾ä»¥ç»´æŠ¤
- æ€§èƒ½ä¼˜åŒ–å›°éš¾
- å•å…ƒæµ‹è¯•å¤æ‚

#### 1.3 ç±»å‹å®šä¹‰ä¸ä¸€è‡´
**é—®é¢˜**: å¤šå¤„é‡å¤å’Œä¸ä¸€è‡´çš„ç±»å‹å®šä¹‰
- Userç±»å‹åœ¨å¤šä¸ªæ–‡ä»¶ä¸­é‡å¤å®šä¹‰
- APIå“åº”ç±»å‹ä¸ç»Ÿä¸€
- ç»„ä»¶Propsç±»å‹ç¼ºä¹å¤ç”¨

### 2. ä»£ç å†—ä½™é—®é¢˜ (LDä¸»å¯¼åˆ†æ)

#### 2.1 APIè°ƒç”¨æ¨¡å¼é‡å¤
**é—®é¢˜**: request.tsä¸­çš„apiå¯¹è±¡æ–¹æ³•é«˜åº¦ç›¸ä¼¼
```typescript
// å½“å‰å†—ä½™ä»£ç 
export const api = {
  get: <T = unknown>(url: string, config?: InternalAxiosRequestConfig): Promise<T> => {
    return request.get<ApiResponse<T>>(url, config).then(res => res.data.data);
  },
  post: <T = unknown>(url: string, data?: unknown, config?: InternalAxiosRequestConfig): Promise<T> => {
    return request.post<ApiResponse<T>>(url, data, config).then(res => res.data.data);
  },
  // ... é‡å¤çš„æ¨¡å¼
};
```

#### 2.2 é”™è¯¯å¤„ç†é€»è¾‘é‡å¤
**é—®é¢˜**: å¤šå¤„ç›¸åŒçš„try-catchæ¨¡å¼å’Œé”™è¯¯å¤„ç†é€»è¾‘

#### 2.3 çŠ¶æ€æ›´æ–°é€»è¾‘é‡å¤
**é—®é¢˜**: AuthStoreä¸­å¤šä¸ªæ–¹æ³•åŒ…å«ç›¸ä¼¼çš„çŠ¶æ€æ¸…ç†å’Œæ›´æ–°é€»è¾‘

### 3. è°ƒè¯•æ¶ˆæ¯æ•æ„Ÿæ€§é—®é¢˜ (PMä¸»å¯¼å®‰å…¨è¯„ä¼°)

#### 3.1 ç”Ÿäº§ç¯å¢ƒè°ƒè¯•ä¿¡æ¯æ³„éœ²
**é«˜é£é™©é—®é¢˜**:
```typescript
// main.tsx - ç”Ÿäº§ç¯å¢ƒä»å¯èƒ½æ‰§è¡Œ
if (import.meta.env.DEV) {
  console.log('AESé…ç½®çŠ¶æ€:', cryptoConfig.getSummary());
  console.log('å¯†é’¥çŠ¶æ€:', AESCryptoUtils.validateKey());
}
```

#### 3.2 ç”¨æˆ·çŠ¶æ€ä¿¡æ¯æš´éœ²
**ä¸­é£é™©é—®é¢˜**:
```typescript
// useUserStatus.ts - åŒ…å«ç”¨æˆ·æ•æ„Ÿä¿¡æ¯
console.log('âœ… ç”¨æˆ·çŠ¶æ€éªŒè¯æˆåŠŸ:', status);
console.log('ç”¨æˆ·æœªå®Œæˆæœºæ„è§’è‰²é€‰æ‹©ï¼Œæ¸…é™¤ç™»å½•çŠ¶æ€');
```

#### 3.3 ç³»ç»Ÿå†…éƒ¨ç»“æ„æš´éœ²
**ä¸­é£é™©é—®é¢˜**:
- é”™è¯¯æ¶ˆæ¯åŒ…å«å†…éƒ¨APIè·¯å¾„
- è°ƒè¯•ä¿¡æ¯æš´éœ²åŠ å¯†é…ç½®è¯¦æƒ…
- å¼€å‘å·¥å…·å¯¹è±¡å¯èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒå­˜åœ¨

### 4. æ•ˆç‡é—®é¢˜ (LDä¸»å¯¼æ€§èƒ½åˆ†æ)

#### 4.1 ä¸å¿…è¦çš„é‡æ¸²æŸ“
**é—®é¢˜**: useUserStatus Hookè®¾è®¡å¯¼è‡´æ½œåœ¨çš„é‡å¤è°ƒç”¨
```typescript
// å½“å‰é—®é¢˜ï¼šä¾èµ–æ•°ç»„å¯èƒ½å¯¼è‡´é‡å¤æ‰§è¡Œ
useEffect(() => {
  // ... éªŒè¯é€»è¾‘
}, [isAuthenticated, token, logout, navigate]);
```

#### 4.2 å†…å­˜ç®¡ç†é—®é¢˜
**é—®é¢˜**: 
- äº‹ä»¶ç›‘å¬å™¨æœªæ­£ç¡®æ¸…ç†
- å®šæ—¶å™¨(tokenManager)å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼
- ç»„ä»¶å¸è½½æ—¶çŠ¶æ€æœªå®Œå…¨æ¸…ç†

#### 4.3 Bundleä¼˜åŒ–ä¸è¶³
**é—®é¢˜**:
- ä»£ç åˆ†å‰²ç­–ç•¥ä¸å¤Ÿç»†åŒ–
- ç¬¬ä¸‰æ–¹åº“æœªæŒ‰éœ€åŠ è½½
- é™æ€èµ„æºç¼“å­˜ç­–ç•¥ç¼ºå¤±

## ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆ

### é˜¶æ®µä¸€ï¼šæ¶æ„é‡æ„ (ARä¸»å¯¼)

#### 1.1 çŠ¶æ€ç®¡ç†é‡æ„
**ç›®æ ‡**: å®ç°çŠ¶æ€ç®¡ç†çš„èŒè´£åˆ†ç¦»
```typescript
// ä¼˜åŒ–åçš„çŠ¶æ€ç®¡ç†æ¶æ„
interface AuthState {
  token: string | null;
  isAuthenticated: boolean;
  loading: boolean;
}

interface UserState {
  user: User | null;
  hasSelectedOrgRole: boolean;
}

interface SessionState {
  expiryDate: string | null;
  lastActivity: number;
}
```

#### 1.2 ç»„ä»¶è§£è€¦
**ç›®æ ‡**: é™ä½BasicLayoutç»„ä»¶å¤æ‚åº¦
- æå–LayoutProviderç»Ÿä¸€ç®¡ç†å¸ƒå±€çŠ¶æ€
- åˆ›å»ºç‹¬ç«‹çš„æ¨¡å—ç®¡ç†å™¨
- å®ç°ç»„ä»¶é—´çš„æ¾è€¦åˆé€šä¿¡

#### 1.3 ç±»å‹ç³»ç»Ÿç»Ÿä¸€
**ç›®æ ‡**: å»ºç«‹ç»Ÿä¸€çš„ç±»å‹å®šä¹‰ä½“ç³»
- åˆ›å»ºæ ¸å¿ƒç±»å‹å®šä¹‰æ–‡ä»¶
- å®ç°ç±»å‹çš„ç»§æ‰¿å’Œå¤ç”¨
- å»ºç«‹APIç±»å‹çš„è‡ªåŠ¨ç”Ÿæˆæœºåˆ¶

### é˜¶æ®µäºŒï¼šä»£ç ä¼˜åŒ– (LDä¸»å¯¼)

#### 2.1 APIå±‚é‡æ„
**ç›®æ ‡**: æ¶ˆé™¤é‡å¤ä»£ç ï¼Œæé«˜å¯ç»´æŠ¤æ€§
```typescript
// ä¼˜åŒ–åçš„APIå·¥å…·
class ApiClient {
  private createMethod<T>(method: string) {
    return (url: string, data?: unknown, config?: InternalAxiosRequestConfig): Promise<T> => {
      const requestConfig = { ...config, method, url, data };
      return this.request<T>(requestConfig);
    };
  }
}
```

#### 2.2 é”™è¯¯å¤„ç†ç»Ÿä¸€
**ç›®æ ‡**: å»ºç«‹ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- åˆ›å»ºé”™è¯¯å¤„ç†ä¸­é—´ä»¶
- å®ç°é”™è¯¯çš„åˆ†ç±»å’Œå¤„ç†ç­–ç•¥
- å»ºç«‹é”™è¯¯æ—¥å¿—æ”¶é›†æœºåˆ¶

#### 2.3 å·¥å…·å‡½æ•°ä¼˜åŒ–
**ç›®æ ‡**: æå–å…¬å…±é€»è¾‘ï¼Œå‡å°‘é‡å¤ä»£ç 
- åˆ›å»ºé€šç”¨çš„çŠ¶æ€æ›´æ–°å·¥å…·
- å®ç°é…ç½®ç®¡ç†çš„ç»Ÿä¸€æ¥å£
- å»ºç«‹ç¼“å­˜ç®¡ç†çš„é€šç”¨æ–¹æ¡ˆ

### é˜¶æ®µä¸‰ï¼šå®‰å…¨åŠ å›º (PMä¸»å¯¼)

#### 3.1 è°ƒè¯•ä¿¡æ¯æ¸…ç†
**ç›®æ ‡**: æ¶ˆé™¤ç”Ÿäº§ç¯å¢ƒçš„æ•æ„Ÿä¿¡æ¯æ³„éœ²
```typescript
// å®‰å…¨çš„è°ƒè¯•ä¿¡æ¯ç®¡ç†
class DebugManager {
  private static isDevelopment = import.meta.env.DEV;
  
  static log(message: string, data?: any) {
    if (this.isDevelopment) {
      console.log(`[SVT-DEBUG] ${message}`, data);
    }
  }
  
  static logSensitive(message: string, data?: any) {
    if (this.isDevelopment && import.meta.env.VITE_DEBUG_SENSITIVE === 'true') {
      console.log(`[SVT-SENSITIVE] ${message}`, data);
    }
  }
}
```

#### 3.2 é”™è¯¯ä¿¡æ¯è„±æ•
**ç›®æ ‡**: é˜²æ­¢ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯æ³„éœ²
- å®ç°é”™è¯¯ä¿¡æ¯çš„åˆ†çº§å¤„ç†
- å»ºç«‹ç”Ÿäº§ç¯å¢ƒçš„é”™è¯¯ä¿¡æ¯è¿‡æ»¤æœºåˆ¶
- åˆ›å»ºå®‰å…¨çš„æ—¥å¿—è®°å½•ç­–ç•¥

### é˜¶æ®µå››ï¼šæ€§èƒ½ä¼˜åŒ– (LDä¸»å¯¼)

#### 4.1 æ¸²æŸ“ä¼˜åŒ–
**ç›®æ ‡**: å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“
```typescript
// ä¼˜åŒ–åçš„Hookè®¾è®¡
export const useUserStatus = () => {
  const [userStatus, setUserStatus] = useState<UserStatusVerificationResult | null>(null);
  const [loading, setLoading] = useState(false);
  const hasInitialized = useRef(false);
  
  const verifyStatus = useCallback(async () => {
    // é˜²é‡å¤è°ƒç”¨çš„ä¼˜åŒ–é€»è¾‘
  }, []);
  
  useEffect(() => {
    if (!hasInitialized.current && isAuthenticated && token) {
      hasInitialized.current = true;
      verifyStatus();
    }
  }, [isAuthenticated, token, verifyStatus]);
};
```

#### 4.2 å†…å­˜ç®¡ç†ä¼˜åŒ–
**ç›®æ ‡**: é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œæé«˜åº”ç”¨ç¨³å®šæ€§
- å®ç°ç»„ä»¶å¸è½½æ—¶çš„æ¸…ç†æœºåˆ¶
- ä¼˜åŒ–äº‹ä»¶ç›‘å¬å™¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å»ºç«‹å®šæ—¶å™¨çš„ç»Ÿä¸€ç®¡ç†æœºåˆ¶

#### 4.3 Bundleä¼˜åŒ–
**ç›®æ ‡**: å‡å°‘åº”ç”¨åŠ è½½æ—¶é—´
```typescript
// ä¼˜åŒ–åçš„ä»£ç åˆ†å‰²ç­–ç•¥
const manualChunks = {
  // æ ¸å¿ƒæ¡†æ¶
  'react-vendor': ['react', 'react-dom'],
  // UIç»„ä»¶åº“
  'antd-vendor': ['antd', '@ant-design/icons'],
  // è·¯ç”±ç›¸å…³
  'router-vendor': ['react-router-dom'],
  // å·¥å…·åº“
  'utils-vendor': ['axios', 'dayjs', 'crypto-js', 'zustand'],
  // ä¸šåŠ¡ç»„ä»¶
  'business-components': ['./src/components/Business'],
  // é¡µé¢ç»„ä»¶
  'pages': ['./src/pages']
};
```

## ğŸ“Š å®æ–½è®¡åˆ’

### æ—¶é—´å®‰æ’
- **é˜¶æ®µä¸€**: 2å¤© - æ¶æ„é‡æ„è®¾è®¡å’Œæ ¸å¿ƒæ¨¡å—é‡æ„
- **é˜¶æ®µäºŒ**: 3å¤© - ä»£ç ä¼˜åŒ–å’Œé‡æ„å®æ–½
- **é˜¶æ®µä¸‰**: 1å¤© - å®‰å…¨åŠ å›ºå’Œè°ƒè¯•ä¿¡æ¯æ¸…ç†
- **é˜¶æ®µå››**: 2å¤© - æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•éªŒè¯

### é£é™©è¯„ä¼° (PMè¯„ä¼°)
- **é«˜é£é™©**: çŠ¶æ€ç®¡ç†é‡æ„å¯èƒ½å½±å“ç°æœ‰åŠŸèƒ½
- **ä¸­é£é™©**: ç»„ä»¶è§£è€¦å¯èƒ½éœ€è¦å¤§é‡æµ‹è¯•
- **ä½é£é™©**: è°ƒè¯•ä¿¡æ¯æ¸…ç†å’Œæ€§èƒ½ä¼˜åŒ–

### æˆåŠŸæŒ‡æ ‡
- ä»£ç é‡å¤ç‡é™ä½ > 40%
- Bundleå¤§å°å‡å°‘ > 20%
- é¦–å±åŠ è½½æ—¶é—´æå‡ > 30%
- å†…å­˜ä½¿ç”¨ä¼˜åŒ– > 25%
- å®‰å…¨æ¼æ´æ¸…é›¶

## ğŸ“ åç»­ç»´æŠ¤å»ºè®®

### ä»£ç è´¨é‡ä¿éšœ
- å»ºç«‹ä»£ç å®¡æŸ¥æœºåˆ¶
- å®æ–½è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–
- å»ºç«‹æ€§èƒ½ç›‘æ§ä½“ç³»

### å®‰å…¨ç»´æŠ¤
- å®šæœŸå®‰å…¨å®¡è®¡
- å»ºç«‹æ•æ„Ÿä¿¡æ¯æ£€æµ‹æœºåˆ¶
- å®æ–½å®‰å…¨ç¼–ç è§„èŒƒ

### æ€§èƒ½ç›‘æ§
- å»ºç«‹æ€§èƒ½åŸºçº¿
- å®æ–½æŒç»­æ€§èƒ½ç›‘æ§
- å»ºç«‹æ€§èƒ½å›å½’æ£€æµ‹

---

**æ–‡æ¡£çŠ¶æ€**: åˆå§‹ç‰ˆæœ¬
**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**: å¼€å§‹é˜¶æ®µä¸€çš„æ¶æ„é‡æ„å®æ–½
**è´Ÿè´£å›¢é˜Ÿ**: AR(æ¶æ„) + LD(å¼€å‘) + PM(é¡¹ç›®) + DW(æ–‡æ¡£)
